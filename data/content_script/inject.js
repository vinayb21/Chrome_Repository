function contentLoaded2(){var e=document.getElementById("watch7-subscription-container");if(e)contentLoaded();else{var t=document.getElementById("menu-container");t&&contentLoaded(),t||setTimeout(function(){contentLoaded2()},500)}}function tooltip(){var e=document.createElement("div");e.className="popover fade right in",e.style.display="block",e.style.position="relative",e.style.top="-105px",e.style.marginLeft="300px",e.style.cursor="pointer";var t=document.createElement("div");t.className="arrow";var n=document.createElement("h3");n.className="popover-title",n.innerHTML=popTitle;var i=document.createElement("div");i.className="popover-content",i.innerHTML=popMsg,e.onclick=function(){document.getElementById("watch-header").removeChild(e)},e.appendChild(t),e.appendChild(n),e.appendChild(i),document.getElementById("watch-header").appendChild(e)}function forceReload(){window.myPrevieURL=window.location.href,setInterval(function(){var e=window.location.href;e!==window.myPrevieURL&&(window.stop(),location=window.location.href,window.myPrevieURL=e)},500)}var hdColor_videos="#E62117",mp3Color_sound="#009145",ifCopy=!0,_manifest=chrome.extension.getURL(""),storageData={},_parent=null,_interval=null,_saveas=null,getVideoId=function(){return(/watch\?v\=([^\&]*)/.exec(document.location.href)||[null,null])[1]},formatByte=function(e){return e>=Math.pow(2,30)?(e/Math.pow(2,30)).toFixed(1)+"GB":e>=Math.pow(2,20)?(e/Math.pow(2,20)).toFixed(1)+"MB":e>=Math.pow(2,10)?(e/Math.pow(2,10)).toFixed(1)+"KB":e+"B"},getParent=function(){return _parent=document.getElementById("watch7-subscription-container"),_parent||(_parent=document.getElementById("menu-container")),_parent};chrome.runtime.sendMessage({greeting:"copyData"},function(e){"false"==e.farewell&&(ifCopy=!1)});var insertButton=function(){function e(){document.getElementById("main-link-url").style.backgroundColor="#E62117"}function t(){return document.getElementById("watch7-subscription-container")?void(document.getElementById("main-link-url").style.backgroundColor="gray"):document.getElementById("main-link-url").style.backgroundColor="gray"}function n(){document.getElementById("main-link-url").style.backgroundColor="#C21C13"}function i(){document.getElementById("main-link-url").style.backgroundColor="gray"}var l=document.createElement("div");if(l.setAttribute("class","yt-uix-menu "),l.setAttribute("id","main-link-url2"),document.getElementById("watch7-subscription-container")?(l.style.marginLeft="10px",l.style.verticalAlign="middle"):(l.style.position="absolute",l.style.top="10px",l.style.left="-90px"),document.getElementById("watch7-subscription-container")){var o=document.createElement("a");o.setAttribute("id","main-link-url"),o.style.display="inline-block",o.style.fontSize="inherit",o.style.height="24px",o.style.width="28px",o.style.border="1px solid rgb(0, 183, 90);",o.style.borderRadius="3px 0px 0px 3px",o.style.verticalAlign="middle",o.style.position="relative",o.style.lineHeight="24px",o.style.textDecoration="none",o.style.zIndex=1,o.style.color="white",o.style.cursor="pointer",o.style.backgroundColor="#E62117";var r=document.createElement("button");r.setAttribute("id","iydownloader-button"),r.setAttribute("title","Download This Video"),r.style.display="inline-block",r.style.marginLeft="-2px",r.style.paddingLeft="8px",r.style.fontSize="inherit",r.style.height="24px",r.style.paddingRight="21px",r.style.borderRadius="0px 3px 3px 0px",r.style.backgroundColor="rgb(248, 248, 248)",r.style.border="1px solid rgb(204, 204, 204)",r.style.color="rgb(155, 155, 155)",r.style.zIndex=0,r.style.cursor="pointer",r.style.verticalAlign="middle"}else{var o=document.createElement("a");o.setAttribute("id","main-link-url"),o.style.display="inline-block",o.style.fontSize="inherit",o.style.height="24px",o.style.width="28px",o.style.border="1px solid rgb(0, 183, 90);",o.style.borderRadius="3px 0px 0px 3px",o.style.verticalAlign="middle",o.style.position="relative",o.style.lineHeight="24px",o.style.textDecoration="none",o.style.zIndex=1,o.style.color="white",o.style.cursor="pointer",o.style.backgroundColor="gray";var r=document.createElement("button");r.setAttribute("id","iydownloader-button"),r.setAttribute("title","Download This Video"),r.style.display="inline-block",r.style.marginLeft="-2px",r.style.paddingLeft="8px",r.style.fontSize="inherit",r.style.height="24px",r.style.paddingRight="21px",r.style.borderRadius="0px 3px 3px 0px",r.style.backgroundColor="rgb(248, 248, 248)",r.style.border="1px solid rgb(204, 204, 204)",r.style.color="rgb(155, 155, 155)",r.style.zIndex=0,r.style.cursor="pointer",r.style.verticalAlign="middle";var a=document.getElementById("menu-container"),d=document.createElement("ytd-sentiment-bar-renderer");d.id="sentiment",d.className="style-scope ytd-video-primary-info-renderer",d.style="width: 70px;margin-left: -90px;",a.appendChild(d),d.getElementsByTagName("div")[0].style="background-color: red"}var s=document.createElement("i");if(s.style.display="inline-block",s.style.position="absolute",s.style.backgroundSize="12px",s.style.backgroundImage="url("+menu.svg.getSrc("download","#ffffff")+")",s.style.backgroundRepeat="no-repeat",s.style.backgroundPosition="center center",s.style.color="white",s.style.width="16px",s.style.height="16px",s.style.left="6px",s.style.top="3px",document.getElementById("watch7-subscription-container")){var c=document.createElement("i");c.style.display="inline-block",c.style.position="absolute",c.style.borderWidth="5px",c.style.borderstyle="Solid",c.style.borderColor="rgb(134, 130, 130) transparent transparent",c.style.borderImage="initial",c.style.right="6px",c.style.top="13px",c.verticalAlign="middle",c.setAttribute("class","yt-uix-button-arrow")}else{var c=document.createElement("i");c.innerHTML="▼",c.style.fontSize="8px",c.style.transform="scale(1.9, 0.9)",c.style.position="absolute",c.style.top="8px",c.style.right="8px"}var p=document.createElement("span");return p.setAttribute("id","download-btn"),p.setAttribute("class","yt-uix-button-content"),p.style.fontSize="100%",o.appendChild(s),r.appendChild(p),r.appendChild(c),l.appendChild(o),l.appendChild(r),_parent.appendChild(l),background.send("page:main-url",{url:document.location.href}),document.getElementById("main-link-url2").addEventListener("mouseover",e),document.getElementById("main-link-url2").addEventListener("mouseout",t),document.getElementById("main-link-url2").addEventListener("mousedown",n),document.getElementById("main-link-url2").addEventListener("mouseup",i),r},menu={ul:null,hide:function(){var e=document.getElementById("iydownloader-ul");e&&e.parentNode.removeChild(e),menu.ul=null},show:function(e){menu.ul=document.createElement("ul"),menu.ul.setAttribute("id","iydownloader-ul"),menu.ul.setAttribute("class","yt-uix-button-menu");var t=document.createElement("div");t.setAttribute("id","hide_list"),t.setAttribute("style","max-height: 192px; overflow-y: scroll; display: none;");var n=function(e,n){var i=document.createElement("li");i.setAttribute("role","menuitem"),i.addEventListener("mouseover",function(){this.style.backgroundColor="#F1F1F1",this.style.color="white"}),i.addEventListener("mouseout",function(){this.style.backgroundColor=""});var l=document.createElement("span"),o=document.createElement("span"),r=document.createElement("span"),a=document.createElement("a");a.style.display="block",a.style.lineHeight="24px",a.style.textDecoration="none",a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.padding="0px 5px",a.style.color="#3D3D3D",a.style.cursor="pointer",a.setAttribute("href",e.url+"&title="+e.title.toLowerCase()),"0"===e.format&&a.setAttribute("target","_blank"),"0"!==e.format&&a.setAttribute("download",e.title.toLowerCase()+"."+e.container),"0"!==e.format&&a.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),background.send("page:download",{url:this.getAttribute("href"),filename:this.getAttribute("download")})}),"v"===e.info[4]&&(a.style.color="#F5B041"),"a"===e.info[4]&&(a.style.color="#58BB75"),"h"===e.info[4]&&(a.style.color=hdColor_videos),"m"===e.info[4]&&(a.style.color=mp3Color_sound);var d=e.info[1]?(e.info[0]?e.info[0].toUpperCase():"N/A")+(e.info[1]?" "+e.info[1]:"N/A"):"",s=e.info[3]?(e.info[2]?"Audio "+e.info[2].toUpperCase():"N/A")+(e.info[3]?" "+e.info[3]+"kbps":"N/A"):"Audio N/A";if(e.info[1]?l.textContent=d:e.info[3]&&(l.textContent=s),l.style["float"]="left",l.style.fontWeight="bold",o.style["float"]="right",o.style.fontWeight="bold",o.style.fontSize="75%",r.setAttribute("YDL-d-u",e.url),e.info[1]){var c=e.info[1];if("HD"===c){var p=document.createElement("span");p.textContent=" 1080",p.style.paddingRight="3px",p.style.color="white",p.style.borderRadius="2px",p.style.backgroundColor="rgb(80, 80, 80)",p.style.width="27px",p.style.height="17px",p.style.lineHeight="18px",p.style.textAlign="center",p.style.verticalAlign="middle",p.style.marginRight="3px",p.style.marginTop="3px",p.style["float"]="left",l.appendChild(p)}if("4K"===c||"2K"===c){var p=document.createElement("span");p.textContent=" 1440","4K"===c&&(p.textContent=" 2160"),p.style.paddingRight="3px",p.style.color="white",p.style.borderRadius="2px",p.style.backgroundColor="rgb(80, 80, 80)",p.style.width="27px",p.style.height="17px",p.style.lineHeight="18px",p.style.textAlign="center",p.style.verticalAlign="middle",p.style.marginRight="3px",p.style.marginTop="3px",p.style["float"]="left",l.appendChild(p)}if("320Kbps"===c||"128Kbps"===c||"124Kbps"===c||"256Kbps"===c){var p=document.createElement("span");p.textContent=" MP3",p.style.paddingRight="3px",p.style.color="white",p.style.borderRadius="2px",p.style.backgroundColor="rgb(80, 80, 80)",p.style.width="27px",p.style.height="17px",p.style.lineHeight="18px",p.style.textAlign="center",p.style.verticalAlign="middle",p.style.marginRight="3px",p.style.marginTop="3px",p.style["float"]="left",l.appendChild(p)}}if(e.info[1]){var c=e.info[1];if("320Kbps"===c||"HD"===c||"2K"===c||"4K"===c||"128Kbps"===c||"124Kbps"===c||"256Kbps"===c){var u=document.createElement("span");u.style.paddingRight="16px",u.style.width="16px",u.style.height="16px",u.style.lineHeight="18px",u.style.textAlign="center",u.style.verticalAlign="middle",u.style.marginLeft="3px",u.style.backgroundImage='url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABA0lEQVQ4T6XTTyqGURgF8N8XMvUniawAO/Ff7IBiAabKBliAUKIMlIEBMbEHbEBGBpQMiZ66V9fb9369X+7k1q1znnPOc27LP0+rC3w/BvCC74xrSjCHTTxhBGt4C5ImBEtYSKBPTGEHK00IZrBagLPyA2zhtZOC8DyJe8TkfPpwidl4ryPInp8xXHgO8BGOcVNnIfwuYj1NDs/juEvgE1zXbaEEf2EwfCJP/gOuKgjZy8XkHpzhA2PYzbLL7uQMIrALzFcC68U0HirvvxyZYDTtdqOS9mEK7LausZkg7nNs47HwfIqrTnUv1xiB7aeKTmCvnecqWbseDOG9znMTgi4+KD9jkDQRp7DEAwAAAABJRU5ErkJggg==")',l.appendChild(u)}}if(e.info[1]){var c=e.info[1];if("1080"===c||"2160"===c||"1440"===c||"720"===c||"8K"===c||"4K"===c&&100!==e.info[3]){var p=document.createElement("span");p.textContent=" HD",p.style.paddingRight="3px",p.style.color="white",p.style.borderRadius="2px",p.style.backgroundColor="rgb(80, 80, 80)",p.style.width="19px",p.style.height="17px",p.style.lineHeight="18px",p.style.textAlign="center",p.style.verticalAlign="middle",p.style.marginLeft="3px",l.appendChild(p)}else if("mp3"===c||"MP3"===c){var p=document.createElement("span");p.textContent="MP3",p.style.paddingRight="1px",p.style.color="white",p.style.borderRadius="2px",p.style.backgroundColor="rgb(80, 80, 80)",p.style.width="19px",p.style.height="17px",p.style.lineHeight="18px",p.style.textAlign="center",p.style.verticalAlign="middle",p.style.marginLeft="3px",l.appendChild(p)}}if(s.indexOf("N/A")>0){var m=document.createElement("img");m.title="without audio",m.style.width="14px",m.style.height="14px",m.style.marginLeft="3px",m.style.verticalAlign="top",m.style.position="relative",m.style.top="5px",m.style.cursor="pointer",m.src=menu.svg.getSrc("noSound","#ff0000"),o.appendChild(m)}if(o.appendChild(r),a.appendChild(l),a.appendChild(o),i.appendChild(a),"3gp"==e.info[0]&&(e.isshow=!1),e.isshow||"0"==e.format)menu.ul.appendChild(i),"m"!==e.info[4]&&window.setTimeout(function(){background.send("page:get-video-size",{url:e.url})},300);else{var g=document.createElement("img");g.title="Get file size",g.style.width="14px",g.style.height="14px",g.style.marginLeft="3px",g.style.verticalAlign="top",g.style.position="relative",g.style.top="5px",g.style.cursor="pointer",g.setAttribute("YDL-d-u",e.url),g.src=menu.svg.getSrc("info","#333333"),g.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),window.setTimeout(function(){background.send("page:get-video-size",{url:e.url})},300)}),r.appendChild(g),t.appendChild(i)}if("0"!==e.format&&ifCopy!==!1){var y=document.createElement("img");y.title="Copy to Clipboard",y.style["float"]="left",y.style.width="14px",y.style.height="14px",y.style.marginRight="3px",y.style.verticalAlign="top",y.style.position="relative",y.style.top="5px",y.style.cursor="pointer",y.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAABGdBTUEAALGOfPtRkwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAABeElEQVR42mL8//8/w0ACgABiQeacPHlSCEgVAbEaEDNRYG6Pubn5CWIUAgQQC5LlbEDqIBDrUMFjK4hVCBBAyL50oJLlJAGAAEKOAiEkdigwCNfQwwEAAcTEMMAAIIBYiFEETB/iQMoaiNnItOc3EB8BhupLdAmAAGIhwnJXILUBiLko9Ow3oFkBQEfsRhYECCBiomAyFSxngJoxCV0QIICIiQI1KH0UiCeQaXkxEFsAsQa6BEAAEeMARij9hNycAQz6CFxyAAE04LkAIIAG3AEAATTgDgAIoAF3AEAADbgDAAJowB0AEEAD7gCAABpwBwAE0IA7ACCABtwBAAE04A4ACCDkuuAhEK+Esh/TywEAAQR3ALCiOQ6kjtM7BAACaMCjACCABtwBAAE04A4ACKABdwBAABHTIvoAxAJAHA5s2YRTaN87dAGAACImBCZR0cMT0QUAAoiRmN4x0OexQMqVgn7BLyDeCczqS9ElAAKIcaC75wABBgAT+TvoIaNenwAAAABJRU5ErkJggg==",y.onclick=function(t){t.preventDefault(),t.stopPropagation();var n=document.createElement("a");n.id="inputCopy",n.style.width="0",n.style.height="0",n.innerHTML=e.url,document.body.appendChild(n);var i=document.querySelector("#inputCopy"),l=document.createRange();l.selectNode(i),window.getSelection().addRange(l),document.execCommand("copy"),window.getSelection().removeAllRanges(),document.body.removeChild(n)},o.appendChild(y)}};e.forEach(n);var i=document.getElementById("main-link-url").getClientRects()[0],l="top: "+(i.top+window.scrollY+24)+"px; left:"+(i.left+window.scrollX)+"px; ";if(l+="position: absolute;list-style-type: none;min-height: 24px;text-align:left;white-space:nowrap;font-family:Calibri, Roboto, Arial, sans-serif;min-width: 190px;font-weight: bold;font-size: 13px;padding: 0 5px; cursor: pointer;background:#fff;",l+="border-radius: 4px 4px 4px 4px; border: 1px solid #ccc;",menu.ul.setAttribute("style",l),t.hasChildNodes()){menu.ul.appendChild(t);var o=document.createElement("div");o.setAttribute("style","display: block; margin: 1px 0px; border-top: 1px solid rgb(214, 214, 214);"),menu.ul.appendChild(o);var r=document.createElement("li");r.setAttribute("id","more_show"),r.textContent="More »",r.style.lineHeight="25px",r.style.padding="0 5px",r.style.cursor="pointer",r.style.width="100px",r.style["float"]="left";var a=document.createElement("li");a.setAttribute("id","more_show"),a.innerHTML='<img align="center" width="14" height="14" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABUUlEQVQ4T63Tr0tfYRQG8M93MqegCIJh0WQTh0zDlBWLWTApoqLOuSYsDgXBoE0m+As1OFjxDxBhuDKLYFpYX7EIpomgcuS9crleb9pb3sv58Zz3Oc9za54/+xhN6fgeLyutVQDcIsvf4UUVwEu8xRmu0YaLQkMLrtCAHvzCTTbhO4bxF98wgDcFgB84wjTacYCRAOjHzwoqVam+ABjDXklV0NlA8P+A7pKaiQCoxwrmUJeKovld2keEXuEUXSkfe1rGUl6FL1hMBcFzqzBxFusp9jkNfZQp4tEcIHGmsF0A+IivKbaQDYsXNGI18cy0LlKImqDQmQDCI/Ga+QD4hLWSBZ1jM5lpJtecL32QsTeZosqVz0n5PmsKuWJxv7GDwWSmfGNQOMYkXuMQQxlA3B34g+DXnGybB2jFJZqSxCf4999+pjKOu8mlkQtaIe2Tcw+gdT5PMvu+QAAAAABJRU5ErkJggg==" /> Options',a.style.lineHeight="25px",a.style.padding="0 5px",a.style.cursor="pointer",a.style.width="60px",a.style["float"]="right",menu.ul.appendChild(r),menu.ul.appendChild(a),r.addEventListener("click",function(e){e.stopPropagation();var t=this.innerText;t.indexOf("»")>0?(document.getElementById("hide_list").style.display="block",this.innerText="More «"):(document.getElementById("hide_list").style.display="none",this.innerText="More »")},!1),a.addEventListener("click",function(e){var t=chrome.extension.getURL("data/options/opt.html");window.open(t,"_blank")},!1)}document.body.appendChild(menu.ul)},svg:{icon:{download:"M 4,0 4,8 0,8 8,16 16,8 12,8 12,0 4,0 z",info:"M 8,1.55 C 11.6,1.55 14.4,4.44 14.4,8 14.4,11.6 11.6,14.4 8,14.4 4.44,14.4 1.55,11.6 1.55,8 1.55,4.44 4.44,1.55 8,1.55 M 8,0 C 3.58,0 0,3.58 0,8 0,12.4 3.58,16 8,16 12.4,16 16,12.4 16,8 16,3.58 12.4,0 8,0 L 8,0 z M 9.16,12.3 H 6.92 V 7.01 H 9.16 V 12.3 z M 8.04,5.91 C 7.36,5.91 6.81,5.36 6.81,4.68 6.81,4 7.36,3.45 8.04,3.45 8.72,3.45 9.27,4 9.27,4.68 9.27,5.36 8.72,5.91 8.04,5.91 z",noSound:"M 11.4,5.05 13,6.65 14.6,5.05 16,6.35 14.4,7.95 16,9.55 14.6,11 13,9.35 11.4,11 10,9.55 11.6,7.95 10,6.35 z M 8,1.75 8,14.3 4,10.5 l -4,0 0,-4.75 4,0 z"},cache:{},getSrc:function(e,t){return this.icon[e]?(this.cache[e]||(this.cache[e]={}),this.cache[e][t]||(this.cache[e][t]=btoa('<?xml version="1.0" encoding="UTF-8"?><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" width="16" height="16" viewBox="0 0 16 16" id="svg2" xml:space="preserve"><path d="'+this.icon[e]+'" fill="'+t+'" /></svg>')),this.cache[e][t]?"data:image/svg+xml;base64,"+this.cache[e][t]:""):""},getSvg:function(e,t,n,i){var l=document.createElementNS("http://www.w3.org/2000/svg","svg"),o=l.namespaceURI;l.setAttribute("width",n||"16"),l.setAttribute("height",i||n||"16"),l.setAttribute("viewBox","0 0 16 16");var r=document.createElementNS(o,"path");return l.appendChild(r),r.setAttribute("d",this.icon[e]),t&&r.setAttribute("fill",t),l}}},getDownloadUrl=function(){background.send("page:catch-download-url",{url:document.location.href})},ctrlDrop=0,_capture=function(e){var t=!0;chrome.runtime.sendMessage({greeting:"EnableAddoncrop"},function(e){t="false"==e.farewell?!1:!0}),_interval&&window.clearInterval(_interval),_interval=window.setInterval(function(){if(getParent()&&0==ctrlDrop&&t){if(ctrlDrop=1,document.getElementById("main-link-url2"))return;var e=insertButton();e.addEventListener("click",function(){menu.ul?menu.hide():getDownloadUrl()},!1),window.addEventListener("click",menu.hide,!1),_interval&&(ctrlDrop=0,window.clearInterval(_interval))}},300)},contentLoaded=function(){/^https?:\/\/www\.youtube.com\/watch\?/.test(document.location.href)&&_capture();var e=document.getElementById("content");if(e){var t=window.MutationObserver;if("undefined"!=typeof t){var n=new t(function(e){e.forEach(function(e){if(null!==e.addedNodes)for(var t=0;t<e.addedNodes.length;t++){var n=e.addedNodes[t].id;if(n&&(-1!==n.indexOf("-main-container")||-1!==n.indexOf("watch7-container")))return void _capture()}})});n.observe(e,{childList:!0,subtree:!0})}}document.removeEventListener("DOMContentLoaded",contentLoaded,!1)};document.addEventListener("DOMContentLoaded",contentLoaded2,!1),background.receive("page:make-dropdown-menu",function(e){e.menu.length>0&&menu.show(e.menu)}),background.receive("page:make-main-button",function(e){if(e.main.length>0){document.getElementById("download-btn").textContent=e.main[0].info[1]?e.main[0].info[1]:"";var t=e.main[0],n=t.url+"&title="+t.title.toLowerCase(),i=t.title.toLowerCase()+"."+t.container;document.getElementById("main-link-url").href=n,document.getElementById("main-link-url").download=i,document.getElementById("main-link-url").addEventListener("click",function(e){e.preventDefault(),background.send("page:download",{url:n,filename:i})})}else document.getElementById("main-link-url").addEventListener("click",function(){menu.ul?menu.hide():getDownloadUrl()})}),background.receive("page:set-video-size",function(e){for(var t=document.querySelectorAll("span[YDL-d-u]"),n=0;n<t.length;n++){var i=t[n];if(i.getAttribute("YDL-d-u")===e.size[0]){i.textContent=formatByte(e.size[1]);break}}}),chrome.runtime.sendMessage({greeting:"force"},function(e){var t=document.getElementById("watch7-subscription-container");1!=e.farewell||t||forceReload()});